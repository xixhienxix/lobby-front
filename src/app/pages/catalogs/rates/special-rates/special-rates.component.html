<div class="modal-content">
  <div style="background-color: var(--background-pink);" class="modal-header">
      <h1 style="text-align: center; color: white;" class="text-center modal-title h4 col-10"
        id="example-modal-sizes-title-lg">
        {{"SpecialRatesComponent.SpecialRateTabTittle" | translate }}
  </h1>
      <button style="background-color:#fa6d7c; font-weight: bold; color: white;" class="btn" (click)="closeModal()"> X </button>
    </div>
</div>
<div class="modal-body">
  <form [formGroup]="tarifaFormGroup">
    <div class="row">
      <mat-radio-group formControlName="estado" class="col-lg-12" aria-label="Select an option">
        <mat-radio-button [checked]="activa" value="1">{{"SpecialRatesComponent.ActiveRate" | translate}}</mat-radio-button>
        <mat-radio-button value="2">{{"SpecialRatesComponent.InactiveRate" | translate}}</mat-radio-button>
      </mat-radio-group>
    </div>
    <br>
    <div class="row">
      <div class="col-lg-12">
        <label style="font-weight: bold;" class="form-label">{{"SpecialRatesComponent.RateName" | translate}}</label>
        <input id="name" name="name"class="form-control" formControlName="nombre" name="nombre">
      </div>
    </div>
    <!-- <div class="row">
      <div class="col-lg-12">
        <div
        *ngIf="name.invalid && (name.dirty || name.touched)"
        class="alert"
      >
        <div *ngIf="name.errors?.['required']">Name is required.</div>
        <div *ngIf="name.errors?.['minlength']">
          Name must be at least 4 characters long.
        </div>
        <div *ngIf="name.errors?.['forbiddenName']">
          Name cannot be Bob.
        </div>
      </div>
      </div>
    </div> -->

    <br>


    <h1 class="modal-title h4 col-10" id="example-modal-sizes-title-lg">
        {{"SpecialRatesComponent.SpecialRateTittle" | translate }}
    </h1>

  

    <hr style="border: 5px solid red; border-radius: 5px;">

    <br>

    <div class="row">
      <div class="col-lg-12">
        <label style="font-weight: bold;" class="form-label">{{ "SpecialRatesComponent.FirstRateApply" | translate }}</label>
        <input class="form-control" formControlName="tarifaBase" name="tarifaBase">
      </div>
    </div>

    <br>

    <div class="row">
      <div class="col-lg-12">
        <mat-checkbox #checkbox [checked]="tarifaVariante" (change)="tarifasVariantes($event.checked)" > <h3> {{ "SpecialRatesComponent.tarifaEspecialQuestion" | translate }} </h3>   </mat-checkbox>
      </div>
  </div>

  <br>
<ng-container *ngIf="tarifaVariante">
  <div class="row">
    <div class="col-lg-6">
      <label class="form-label">{{"SpecialRatesComponent.RateOnePerson" | translate}}</label>
      <input  type="number" class="form-control" formControlName="tarifa1persona" name="tarifa1persona">
    </div>
    <div class="col-lg-6">
      <label class="form-label">{{"SpecialRatesComponent.RateTwoPerson"| translate}}</label>
      <input  type="number" class="form-control" formControlName="tarifa2persona" name="tarifa2persona">
    </div>
  </div>
  <br>
  <div class="row">
    <div class="col-lg-6">
      <label class="form-label">{{"SpecialRatesComponent.RateThreePerson"| translate}}</label>
      <input  type="number" class="form-control" formControlName="tarifa3persona" name="tarifa3persona">
    </div>
    <div class="col-lg-6">
      <label class="form-label">{{"SpecialRatesComponent.RateKids"| translate}} </label>
      <input  type="number" class="form-control" formControlName="tarifaNinos" name="tarifaNinos">
    </div>
  </div>
  
  <br>
  <div class="row">
    <div class="col-lg-12">
      <label style="color:#00506a; font-weight: bold;" class="form-label">Aplica los dias: <small>Si no se selecciona ninguna la tarifa aplicara para todos los días</small></label>
    </div>
  </div>
  <div class="row">
    <div class="col-lg-12">
      <section class="checkbox-section">
        <ng-container *ngFor="let option of options(); let i = index">
          <mat-checkbox 
          class="checkbox-margin" value="{{option}}"
          [checked]="option.checked"
          (change)="getOption($event.checked,i)">
          {{option.name}}
          </mat-checkbox>
        </ng-container>
      </section>
    </div>
  </div>
</ng-container>

    <br>

    <ng-container *ngIf="tarifaVariante">
      <div class="row">
        <div class="col-lg-12">
          <mat-checkbox [checked]="firstRateCheckbox" (change)="onFirstRateCheckbox($event)"> <h3> {{ "SpecialRatesComponent.SpecialRateQuestion" | translate }} </h3>   </mat-checkbox>
        </div>
    </div>
    <hr style="border: 5px solid red; border-radius: 5px;">
    </ng-container>



  <ng-container *ngIf="firstRateCheckbox && tarifaVariante">
    <div class="row">
      <div class="col-lg-12">
          <small style="color: red;"> {{ "SpecialRatesComponent.SpecialRatesExample" | translate }} </small>
      </div>
  </div>
  
  <br>
  
  <!-- <div class="row">
  <div class="col-lg-12">
    <label style="font-weight: bold;" class="form-label">{{ "SpecialRatesComponent.SecondRateApply" | translate }}</label>
    <input class="form-control" formControlName="tarifaBase2" name="tarifaBase2">
  </div>
  </div>
  
  <br> -->
  
  <div class="row">
  <div class="col-lg-6">
    <label class="form-label">{{"SpecialRatesComponent.ExtraOnePersonRate" | translate}}</label>
    <input  type="number" class="form-control" formControlName="tarifa1persona2" name="tarifa1persona2">
  </div>
  <div class="col-lg-6">
    <label class="form-label">{{"SpecialRatesComponent.ExtraTwoPersonRate"| translate}}</label>
    <input  type="number" class="form-control" formControlName="tarifa2persona2" name="tarifa2persona2">
  </div>
  </div>
  <br>
  <div class="row">
  <div class="col-lg-6">
    <label class="form-label">{{"SpecialRatesComponent.ExtraThreePersonRate"| translate}}</label>
    <input  type="number" class="form-control" formControlName="tarifa3persona2" name="tarifa3persona2">
  </div>
  <div class="col-lg-6">
    <label class="form-label">{{"SpecialRatesComponent.ExtraKidsRate"| translate}} </label>
    <input  type="number" class="form-control" formControlName="tarifaNinos2" name="tarifaNinos2">
  </div>
  </div>
  
  <br>
  
  <div class="row">
  <div class="col-lg-12">
    <label style="color:#00506a; font-weight: bold;" class="form-label">Aplica los dias: <small>Si no se selecciona ninguna la tarifa aplicara para todos los días</small></label>
  </div>
  </div>
  <div class="row">
  <div class="col-lg-12">
    <section class="checkbox-section">
      <ng-container *ngFor="let option of options2(); let i = index">
        <mat-checkbox 
        class="checkbox-margin" value="{{option}}"
        [checked]="option.checked"
        (change)="getOption2($event.checked, i)">
        {{option.name}}
        </mat-checkbox>
      </ng-container>
    </section>
  </div>
  </div>
  
  <br>

  <hr style="border: 5px solid red; border-radius: 5px;">

  </ng-container>
  
  <h1 class="modal-title h4 col-10" id="example-modal-sizes-title-lg">
    {{"SpecialRatesComponent.RateApplyTemp" | translate }}
</h1>


<mat-form-field style="width:-webkit-fill-available">
  <mat-label>Rango de Fechas</mat-label>
  <mat-date-range-input [formGroup]="range" [rangePicker]="picker">
    <input matStartDate formControlName="start" placeholder="Llegada">
    <input matEndDate formControlName="end" placeholder="Salida">
  </mat-date-range-input>
  <mat-hint>MM/DD/YYYY – MM/DD/YYYY</mat-hint>
  <mat-datepicker-toggle matIconSuffix [for]="picker"></mat-datepicker-toggle>
  <mat-date-range-picker #picker></mat-date-range-picker>

    <mat-error *ngIf="(range.controls.start.hasError('matStartDateInvalid'))">Fehca Inicial invalida</mat-error>
    <mat-error *ngIf="(range.controls.end.hasError('matEndDateInvalid'))  ">Fecha Final invalida</mat-error>
</mat-form-field>

<br>

<div class="row" style="margin-top: 3%;">
  <div class="col-lg-6">
    <label style="color:#00506a; font-weight: bold;" class="form-label">Estancia minima de noches:
      </label>
    <input class="form-control" type="number" formControlName="minima" name="minima">
  </div>
  <div class="col-lg-6">
    <label style="color:#00506a; font-weight: bold;" class="form-label">Estancia maxima de noches:
      <span
      class="fa fa-question-circle"
      ngbTooltip="Si coloca un 0 la tarifa no tendra maximo de noches" 
      >
     </span>
    </label>
    <input class="form-control" formControlName="maxima" type="number" name="maxima">
  </div>
</div>
<br>


    <div class="row ">
      <div class="col-lg-12">
          <label style="font-weight: bold;" class="form-label">Tarifa Estandar Global de la Habitación(es)</label>
      </div>
  </div>
      <div class="row">
          <div class="col-lg-12">
            <div class="input-group">
              <mat-select 
              (menuOpened)="preventCloseOnClickOut()" (menuClosed)="allowCloseOnClickOut()"
              #camasSelect
              multiple
              class="form-control form-control-lg"
              [formControl]="camasFC"                               
              [(ngModel)]="resultLocationCamas">
              <footer class="col-sm-12">
                <button style="color:white" (click)="camasSelect.close(); selectionChange();" mat-button class="col-sm-4 btn btn-primary">Confirmar</button>
              </footer>
                <mat-select-trigger>                                
                    <button *ngIf="camasFC.value?.length > 0" class="button1">{{camasFC.value[0]}}
                        <span (click)="$event.stopPropagation(); camasValue(camasFC.value[0]); camasFC.value.splice(0,1); selectionChange();" class="lesser-size start-100 translate-middle badge rounded-pill bg-danger">   X    </span>
                    </button> 
                    <button *ngIf="camasFC.value?.length > 1" class="button2">{{camasFC.value[1]}}
                        <span (click)="$event.stopPropagation(); camasValue(camasFC.value[1]); camasFC.value.splice(0,1); selectionChange();" class="lesser-size start-100 translate-middle badge rounded-pill bg-danger">   X    </span>
                    </button>
                    <button *ngIf="camasFC.value?.length > 2" class="button3">{{camasFC.value[2]}}
                        <span (click)="$event.stopPropagation(); camasValue(camasFC.value[2]); camasFC.value.splice(0,1); selectionChange();" class="lesser-size start-100 translate-middle badge rounded-pill bg-danger">   X    </span>
                    </button> 
                  
                    <span *ngIf="camasFC.value?.length > 3" class="additional-selection">
                        (+{{camasFC.value.length - 3}} {{camasFC.value?.length === 4 ? 'mas' : 'mas'}})
                    </span>
                </mat-select-trigger>
    
                <div>
                  <mat-option #matOption [value]="camas.value" *ngFor="let camas of disponiblesIndexadosCamas; let i = index" >{{camas.value}}</mat-option>
                </div>
              </mat-select>
            </div>
            <div *ngIf="camaFCVacio===true">
              <mat-error>Debe Seleccionar almenos un tipo de Cuarto</mat-error>
            </div>
            </div>
      </div>   
      <br>

      <hr style="border: 5px solid red; border-radius: 5px;">
  </form>

  <br>
    
  <div class="row">
      <div class="col-lg-12">
          <h4 style="color: grey;"> {{ "RatesComponent.visibleRate" | translate }} </h4>
      </div>
  </div>

  <mat-radio-group>
    <div class="col-lg-12">
      <ng-container *ngFor="let visibilite of visibility().subTask let i = index">
        <mat-checkbox [disabled]="visibilite.name === 'Channel Manager OTAs' " [checked]="visibilite.value" (change)="updateVisibilityArray($event.checked, i)" style="font-weight: bold;"> {{visibilite.name}}  </mat-checkbox>
      </ng-container>
    </div>
  </mat-radio-group>

      <br>

      <div class="row">
        <div class="col-lg-12">
          <label style="color:#00506a; font-weight: bold;" class="form-label">Política de cancelación</label>
        </div>
      </div>
      <div class="row">
        <div class="col-lg-12">
        <ng-container *ngFor="let politicas of politicas(); let i = index">
          <mat-radio-button [checked]="politicas.value" [value]="politicas.name" (change)="setPoliticas($event.source.checked, i)">{{politicas.name}}</mat-radio-button>
        </ng-container>
        </div>
      </div>
</div>


<div class="card-footer" style="text-align: center;">
<button  (click)="onSubmit()" class="btn btn-success col-lg-12">Aceptar</button>
</div>