<div class="modal-content">
    <div style="background-color: #00506a;" class="modal-header">
      <div style="text-align: center; color: white;" class="text-center modal-title h4 col-10"
        id="example-modal-sizes-title-lg">
        NUEVA RESERVA
        <!-- <label>
          {{huesped.folio}}</label> -->
      </div>
      <button style="background-color:#fa6d7c; font-weight: bold; color: white;" class="btn" (click)="closeModal()"> X </button>
    </div>
</div>

<div  class="cursor-default overlay overlay-block modal-body" style="background-color: #e6e9ed;">
    <form [formGroup]="formGroup" class="form form-label-right" style="background-color: #e6e9ed">

        <!--DatePicker-->
          <mat-form-field style="margin-right: 12px;">
            <mat-label>Seleccion de Fechas</mat-label>
            <mat-date-range-input [rangePicker]="picker">
              <input [formControl]="intialDateFC" matStartDate (dateChange)="addEventIntialDate('change', $event)" placeholder="Fecha de Llegada">
              <input [formControl]="endDateFC"  matEndDate (dateChange)="addEventEndDate('change', $event)" placeholder="Fecha de Salida">
            </mat-date-range-input>
            <mat-hint>MM/DD/YYYY – MM/DD/YYYY</mat-hint>
            <mat-datepicker-toggle matIconSuffix [for]="picker"></mat-datepicker-toggle>
            <mat-date-range-picker #picker></mat-date-range-picker>
          </mat-form-field>

          <label class="h1" style="padding-left: 5%;">Noches: </label>
            <label style="padding-left: 5%; padding-top: 2%; color:#00506a; font-weight: bold;" class="h1">
              {{ stayNights }}
            </label>

            <div style="margin-top: 10px;" class="row">
              <div class="form-group col-lg-6">
                <label style="color:#00506a; font-weight: bold;" class="form-label">Adultos</label>
                <div class="input-group">
                  <div class="input-group-append">
                    <button style="background-color: transparent;border-right: 2px solid #e6e9ed; border-left: 2px solid #dadcdf; border-top : 2px solid #dadcdf; border-bottom: 2px solid #dadcdf;" class="btn btn-secondary" (click)="minus()" type="button" ng-click="countVal=countVal+1">
                      <i class="fa fa-minus">
                      </i>
                    </button>
                  </div>
                  <input
                    style="background-color: #e6e9ed; border-top: 2px solid #dadcdf; border-bottom: 2px solid #dadcdf;  border-left: 2px solid #e6e9ed;"
                    class="text-center input-group form-control form-control-lg form-control-solid"
                    #controladultos
                    placeholder=""
                    [disabled]="true"
                    name="adultos"
                    [value]="quantity"
                    formControlName="adultos"
                    [class.is-invalid]="isControlInvalid('adultos')"
                    [class.is-valid]="isControlValid('adultos')"
                    >
                    <div
                    class="invalid-feedback"
                    *ngIf="controlHasError('max', 'adultos')"
                    >
                    Maximo {{maxPeople}} Adultos
                    </div>
                  <div class="input-group-append">
                    <button style="border-right: 2px solid #dadcdf; border-top: 2px solid #dadcdf; border-bottom: 2px solid #dadcdf; background-color: transparent;" class="btn btn-secondary" (click)="plus()" type="button">
                      <i class="fa fa-plus">
                      </i>
                    </button>
                  </div>
                </div>
              </div>

              <div class="form-group col-lg-6">

                <label style="color:#00506a; font-weight: bold;" class="form-label">Niños</label>
                <div class="input-group">
                  <div class="input-group-append">
                    <button style="background-color: transparent; border-left: 2px solid #dadcdf; border-top: 2px solid #dadcdf; border-top: 2px solid #dadcdf; border-bottom: 2px solid #dadcdf;" class="btn btn-secondary" (click)="minusNin()" type="button">
                      <i class="fa fa-minus">
                      </i>
                    </button>
                  </div>
                  <input
                    style="background-color: #e6e9ed; border-top: 2px solid #dadcdf; border-bottom: 2px solid #dadcdf; border-left: 2px solid #e6e9ed;"
                    [disabled]="true"
                    class="text-center input-group form-control form-control-lg form-control-solid" placeholder=""
                    name="ninos"
                    [value]="quantityNin"
                    formControlName="ninos"
                    [class.is-invalid]="isControlInvalid('ninos')"
                    [class.is-valid]="isControlValid('ninos')"
                    >
                  <div class="input-group-append"
                    class="invalid-feedback"
                    *ngIf="controlHasError('maxlength', 'ninos')"
                  >
                    Maximo {{ maxChildren }} Niños
                  </div>
                  <div class="input-group-append">
                    <button style="background-color: transparent; border-right: 2px solid #dadcdf; border-top: 2px solid #dadcdf; border-bottom: 2px solid #dadcdf;" class="btn btn-secondary" (click)="plusNin()" type="button">
                      <i class="fa fa-plus">
                      </i>
                    </button>
                  </div>
                </div>
              </div>
            </div>

            <div class="row" style="margin-right: 12px; margin-top: 5px;">
              <label style="color:#00506a; font-weight: bold;" class="form-group col-lg-6" >Habitación </label>
              <div class="col-lg-12" style="margin-top:10px">
                <mat-select #tipodeCuartoDropDown
                class="form-control form-control-lg "
                name="habitacion"
                formControlName="habitacion"
                placeholder="-- Seleccione Tipo de Habitación -- "
                required
                (selectionChange)="buscaDispo($event.value)"

                >
                <mat-option value="0">-- Selecciona Habitación --</mat-option>
                    <mat-option value="1">Todos los Tipos de Cuartos</mat-option>
                    <mat-option *ngFor="let tipoCuarto of roomCodes" [value]="tipoCuarto">{{tipoCuarto.Codigo.replace("_"," ")}} </mat-option>
                </mat-select>

                    <!-- <mat-error *ngIf="habitacion.errors?.required">
                      * Campo Obligatorio
                    </mat-error> -->
              </div>
            </div>
            <!-- Spinner -->
            <ng-container *ngIf="isLoading">
              <app-inline-spinner></app-inline-spinner>
            </ng-container>


            <!-- Avaibility Table -->
            <ng-container *ngIf="mySet.size !==0" style="margin-top: 10px;">
              <mat-accordion [style]="accordionDisplay" class="example-headers-align" multi>
                <mat-expansion-panel  [expanded]="step === 1"  hideToggle>
                  <!-- <div *ngIf="maxPeopleFlag" class="row">
                    <br>
                      <small> <label  style="font-weight:bold">El numero de Adultos seleccionado exede la cantidad maxima de personas permitida para ste tipo de habitacion, elija otro tipo de habitacion o disminuya la cantidad de Adultos</label></small>
                  </div> -->
                    <mat-expansion-panel-header [style]="maxPeople ? styleDisponibilidad : styleDisponibilidad">
                    <mat-panel-title>
                      CON DISPONIBILIDAD
                    </mat-panel-title>
                    <mat-panel-description *ngIf="maxPeopleFlag">
                      <small> <label  style="font-weight:bold">El numero de Adultos seleccionado exede la cantidad maxima de personas permitida para ste tipo de habitacion</label></small>
                    </mat-panel-description> 
                    <!-- <mat-panel-description *ngIf="bandera==true">
                     </mat-panel-description> -->
                  </mat-expansion-panel-header>
        
                  <!--Contenido del Accordion-->
                  <div  class="table-responsive angular-bootstrap-table">

                    <!-- TITULO DE CADA ROOMTYPE DISPONIBLE MAS CAP MAX DE PERSONAS -->
                    <!-- CUANDO EL CUARTO SOLO ES UNO-->
                    <ng-container *ngIf="cuarto !== '1'">
                      <ng-container *ngFor="let codigosCuarto of availavilityRooms; ">
                        <div *ngIf="codigosCuarto.Codigo==cuarto" style="color: rgba(128, 128, 128, 0.623);" class="font-weight-bold modal-header"><a style="color: black">{{codigosCuarto.Codigo.replace("_"," ").toUpperCase()}}</a> (Cap. Max.: {{codigosCuarto.Adultos}})</div>
                      </ng-container>
                    </ng-container>
                    <!-- FIN DE SOLO UN CUARTO -->
                    <!--CUANDO SE SELECCIONARON TODOS LOS CUARTOS-->
                    <ng-container *ngFor="let codigosCuarto of availavilityRooms; ">
                      <div style="color: rgba(128, 128, 128, 0.623);" class="font-weight-bold modal-header"><a style="color: black">{{codigosCuarto.Codigo.replace("_"," ").toUpperCase()}}</a> (Cap. Max.: {{codigosCuarto.Adultos}})</div>
                    </ng-container>
                    <!-- FIN DE SELECCION DE TODOS LOS CUARTOS -->
                    <!-- [FIN] TITULO DE CADA ROOMTYPE DISPONIBLE MAS CAP MAX DE PERSONAS -->

                      <table *ngIf="bandera===false" class="table overflow-hidden table-head-custom table-vertical-center">
                        <thead style="margin-top:5px">
                          <th></th>
                          <th>
                            Tarifa
                          </th>
                          <th>
                            Tarifa Valida Por Cuarto
                          </th>
                          <th>
                            $ TOTAL
                          </th>
                        </thead>
        
                            <ng-container *ngFor="let tarifas of filterRatesAray">
                              <ng-container *ngIf="cuarto === '1'">

                                <ng-container *ngIf="tarifas.Habitacion.includes(selectedRoom.Codigo)">
                                  <tbody>
                                    <tr>
                                      <td><mat-radio-button  (change)="tarifaRadioButton(tarifas)"></mat-radio-button></td>
                                      <td> {{tarifas.Tarifa}}</td>
                                      <td>
                                        <ng-container *ngFor="let dias of tarifas.Dias">
                                          <ng-container *ngIf="dias.checked==true">
                                            {{dias.name}}
                                          </ng-container>
                                        </ng-container>
                                      </td>
                                      <td>{{tarifas.TarifaRack}}</td>
                                    </tr>
                                  </tbody>
                                </ng-container>

                              </ng-container>
                              <!-- <ng-container *ngIf="cuarto=='1'">
                                <tbody>
                                  <tr>
                                    <td>
                                      <mat-radio-button  [disabled]="maximoDePersonas"
                                      (change)="tarifaRadioButton(tarifas)">
                                      </mat-radio-button> <label matTooltip="Info about the action">{{tarifas.Tarifa}}</label></td>
                                      <td>
                                        <ng-container *ngFor="let dias of tarifas.Dias">
                                          <ng-container *ngIf="dias.checked==true">
                                            {{dias.name}}
                                          </ng-container>
                                        </ng-container>
                                      </td>
                                      <td>{{tarifas.TarifaRack * diaDif}}</td>
                                  </tr>
                                </tbody>
                              </ng-container> -->
                            </ng-container>
        
                            <ng-container  *ngIf="ratesArray.length!=0">
                              <tfoot>
                                <tr>
                                  <td colspan=2>
                                    <h4> Habitación:</h4>
                                    <ng-container *ngFor="let habitacionesDisponibles of mySet">
                                      <ng-container *ngFor="let tipocuarto of roomCodes">
                                        <ng-container *ngIf="tipocuarto.Numero == habitacionesDisponibles">
                                          <br><mat-checkbox  formControlName="checkbox"  #checked (change)="preAsignar(tipocuarto.Numero,tipocuarto.Codigo,checked.checked)"></mat-checkbox> &nbsp; <label style="margin-right: 7%">{{ tipocuarto.Numero }}</label>
                                        </ng-container>
                                      </ng-container>
                                    </ng-container>
                                  </td>
                                </tr>
                              </tfoot>
                            </ng-container>
                      </table>
        
                      <!-- <ng-container *ngIf="bandera==true">
                        <ng-container *ngFor="let codigosCuarto of personasXCuarto;  ">
                          <div style="color: rgba(128, 128, 128, 0.623);" class="font-weight-bold modal-header"><a style="color: black">{{codigosCuarto.Codigo.replace("_"," ").toUpperCase()}}</a> (Cap. Max.: {{codigosCuarto.Personas}})</div>
                          <table class="table overflow-hidden table-head-custom table-vertical-center">
                            <thead>
                              <th></th>
                              <th>
                                Tarifa
                              </th>
                              <th>
                                Tarifa Valida Todos
                              </th>
                              <th>
                                $ TOTAL
                              </th>
        
                            </thead>
        
                                <ng-container *ngFor="let tarifas of ratesArray">
                                    <ng-container *ngIf="tarifas.Habitacion==codigosCuarto.Codigo">
                                      <tbody>
                                        <tr>
                                          <td><mat-radio-button  (change)="tarifaRadioButton(tarifas)"></mat-radio-button> </td>
                                          <td>{{tarifas.Tarifa}}</td>
                                          <td>
                                            <ng-container *ngFor="let dias of tarifas.Dias">
                                              <ng-container *ngIf="dias.checked==true">
                                                {{dias.name}}
                                              </ng-container>
                                            </ng-container>
                                          </td>
                                        <td>{{tarifas.TarifaRack}}</td>
                                        </tr>
                                      </tbody>
                                    </ng-container>
                                </ng-container>
        
                                <ng-container  *ngIf="ratesArray.length!=0">
                                  <tfoot>
                                    <tr>
                                      <td colspan=2>
                                        <h4> Habitación:</h4>
                                        <ng-container *ngFor="let habitacionesDisponibles of inforCuartoyNombre; ">
                                          <ng-container *ngFor="let tipocuarto of cuartos">
                                            <ng-container *ngIf="tipocuarto.Numero == habitacionesDisponibles.nombreHabitacion && habitacionesDisponibles.tipodeCuarto==codigosCuarto.Codigo">
                                              <br><mat-checkbox [disabled]="maximoDePersonas" formControlName="checkbox" [checked]="tipocuarto.value" #checked (change)="preAsignar(tipocuarto.Numero,tipocuarto.Codigo,checked.checked)"></mat-checkbox> &nbsp; <label style="margin-right: 7%">{{ tipocuarto.Numero }}</label>
                                            </ng-container>
                                          </ng-container>
                                        </ng-container>
                                      </td>
                                    </tr>
                                  </tfoot>
                                </ng-container>
                          </table>
                          </ng-container>
                      </ng-container> -->
        
        
                    </div>
                </mat-expansion-panel>
              </mat-accordion>
             </ng-container>
    </form>
</div>
  